<!DOCTYPE HTML>
{# vim:se syntax=html.tornadotmpl: #}

<meta charset="utf-8">
<link rel="stylesheet" href="/static/bb.css">

<title>io history</title>

<h1>
<a href="/clean/{{ page }}">clean old</a>
</h1>

<table>
    {% for x in history %}

    {% set time, method, data = x.split(None, 2) %}
    {% set data = (data[1:-1] if data[0] == "[" else data).split(", ", 2) %}

    {% if len(data) == 3 %}
        {% if data[0].isdigit() %}
            {% set data[2] = data[2].strip("'") %}
        {% elif data[1].isdigit() %}
            {% set data[0] = data[0].strip("'") %}
        {% else %}
            {% set data[1] += ", " + data.pop() %}
        {% end %}
    {% end %}

    <tr>
        <td>{{ time }}</td>
        <td class="{{ method }}">
            <abbr title="this is {{ method }}">{{ method }}</abbr>
        </td>
        {% for i, x in enumerate(data, 1) %}
        <td class="f{{ i }}">{{ x }}</td>
        {% end %}
    </tr>

    {% end %}
</table>

{% for i in range(1, pages + 1) %}
<a href="/io/{{ i }}">
    {% if i == page %}
    <strong>{{ i }}</strong>
    {% else %}
    {{ i }}
    {% end %}
</a>
{% end %}
