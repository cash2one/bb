{% include "_head.html" %}
{# vim:se syntax=html.tornadotmpl: #}

<title>{{ io }} history</title>

{#
<a href="/{{ io }}?clean">clean</a>
#}

<table>
    {% for x in history %}

    {% set time, method, data = x.split(None, 2) %}
    {% set _ = data[1:-1].split(", ", 2) %}

    {% if _[0].isdigit() %}
        {% set data, _[2] = _, _[2].strip("'") %}
    {% else %}
        {% set data = ["", "", data[1:-1]] %}
    {% end %}

    <tr>
        <td>{{ time }}</td>
        <td class="{{ method }}">{{ method }}</td>
        {% for i, x in enumerate(data, 1) %}
        <td class="f{{ i }}">{{ x }}</td>
        {% end %}
    </tr>

    {% end %}
</table>

{% for i in range(1, pages + 1) %}
<a href="/{{ io }}?{{ i }}">
    {% if i == page %}
    <strong><em>{{ i }}</em></strong>
    {% else %}
    {{ i }}
    {% end %}
</a>
{% end %}
